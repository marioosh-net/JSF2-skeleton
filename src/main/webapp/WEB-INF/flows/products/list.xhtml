<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:sf="http://www.springframework.org/tags/faces"
	template="/WEB-INF/templates/main.xhtml">

	<!-- menu -->
	<div id="menu"><a href="start">start</a>&#160;<a href="products">products</a></div>
	
	<div>#{testBean.time}</div>
	
	<h:form id="form1">
		<div>#{testBean.time}</div>
		<h:commandLink value="add random user" action="addUser">
			<f:ajax render="@form" />
		</h:commandLink>
		<table border="1">
			<tr>
				<td>id</td>
				<td>login</td>
				<td>pass</td>
				<td />
			</tr>
			<ui:repeat value="#{users}" var="user" id="users1">			
				<tr>
					<td>#{user.id}</td>
					<td>#{user.login}</td>
					<td>#{user.pass}</td>
					<td>
						<h:commandLink value="delete" action="deleteUser">
							<f:ajax render="@form :form2" />
						</h:commandLink>
					</td>
				</tr>
			</ui:repeat>
		</table>
	</h:form>
	
	<h:form id="form2">
		<div>#{testBean.time}</div>
		<h:commandLink value="add random product" action="addProduct">
			<f:ajax render="@form" />
		</h:commandLink>
		<table border="1">
			<tr>
				<td>id</td>
				<td>name</td>
				<td>owner id</td>
				<td />
			</tr>
			<ui:repeat value="#{products}" var="product" id="products1">			
				<tr>
					<td>#{product.id}</td>
					<td>#{product.name}</td>
					<td>#{product.owner.id}</td>
					<td>
						<h:commandLink value="delete" action="deleteProduct">
							<f:ajax render="@form" />
						</h:commandLink>&#160;
						<h:commandLink value="details" action="details"/>
					</td>
				</tr>
			</ui:repeat>
		</table>
	</h:form>
	
	<h:form id="frag">
		<ui:fragment id="toReload">
			<div>#{testBean.time}</div>
		</ui:fragment>
	</h:form>
	<h:form>
		<h:commandLink action="reloadProducts" value="reload products" />
		<!-- <sf:commandLink value="reload products" action="reloadProducts" /> -->
		<h:commandLink action="reloadFrag" value="reload Frag" />
	</h:form>
	
</ui:composition>