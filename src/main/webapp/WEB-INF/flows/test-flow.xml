<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:faces="http://www.springframework.org/schema/faces"
	xsi:schemaLocation="http://www.springframework.org/schema/webflow
						http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
	
	<!-- flow variables -->
	<!-- w jsf #{helloBean} -->
	<var name="helloBean" class="beans.HelloBean" />
	
	<!-- pierwszy view-state jest startowym -->	
	<view-state id="testFlow" view="/pages/start.xhtml">
		
		<transition on="yes">
			<set name="helloBean.message" value="'Kliknales TAK'" />
			
			<!-- flowScope.hash -> w jsf #{hash}-->
			<evaluate expression="helloBean.nextRandomString()" result="flowScope.hash" />
			<render fragments="time" />
		</transition>
		
		<transition on="no">
			<set name="helloBean.message" value="'Kliknales NIE'" />
		</transition>
	</view-state>

	<view-state id="error" view="/pages/error.xhtml">
		<transition on="start" to="testFlow" />
	</view-state>
	
	<end-state id="end" view="/pages/end.xhtml"/>
	
	<!-- tranzycje dostepne z kazdego state'a -->
	<global-transitions>
		<transition on-exception="java.lang.Throwable" to="error" />
	</global-transitions>
	

</flow>